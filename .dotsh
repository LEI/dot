#!/usr/bin/env bash

_post_install() {
  if hash nvim 2>/dev/null \
    && [[ -d "$HOME/.vim" ]] \
    && [[ ! -d "$HOME/.config/nvim" ]]
  then mkdir -p "$HOME/.config" # directory "$state" "$HOME/.config"
    ln -s "$HOME/.vim" "$HOME/.config/nvim"
  fi
}

_main() {
  [[ "$state" == "install" ]] && directory "$state" "$HOME/.vim"

  symlink "$state" --path .vim/* # --name *vimrc

  line_in_file "$state" "$HOME/.vim/vimrc" "source ~/.vim/init.vim"

  [[ "$state" == "remove" ]] && ! hash vim 2>/dev/null \
    && directory "$state" "$HOME/.vim"
}

_main
